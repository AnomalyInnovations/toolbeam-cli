{"version":3,"sources":["../src/index.js"],"names":["require","install","process","on","console","log","err","stack","exit","requireLogin","requireAnonymous","version","command","description","action","file","parse","argv"],"mappings":";;AAWA;;;;AAEA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AAWA;;;;AACA;;;;;;AA7BA;AACAA,QAAQ,oBAAR,EAA8BC,OAA9B;;AAEA;AACAC,QAAQC,EAAR,CAAW,oBAAX,EAAiC,eAAO;AACpCC,UAAQC,GAAR,CAAYC,IAAIC,KAAhB;AACAL,UAAQM,IAAR,CAAa,CAAb;AACH,CAHD;;AA2BA,IAAMC,eAAe,4CAArB;AACA,IAAMC,mBAAmB,gDAAzB;;AAEA,oBACIC,OADJ,CACY,kBAAQA,OADpB;AAEG;8EAFH;;AAKA;AACA,oBACEC,OADF,CACU,QADV,EAEEC,WAFF,CAEc,qBAFd,EAGEC,MAHF,CAGS;AAAA,SAAMJ,iBAAiB;AAAA,WAAM,qCAAN;AAAA,GAAjB,CAAN;AAAA,CAHT;;AAKA,oBACEE,OADF,CACU,OADV,EAEEC,WAFF,CAEc,mBAFd,EAGEC,MAHF,CAGS;AAAA,SAAMJ,iBAAiB;AAAA,WAAM,oCAAN;AAAA,GAAjB,CAAN;AAAA,CAHT;;AAKA,oBACEE,OADF,CACU,QADV,EAEEC,WAFF,CAEc,sBAFd,EAGEC,MAHF,CAGS;AAAA,SAAM,qCAAN;AAAA,CAHT;;AAKA,oBACEF,OADF,CACU,QADV,EAEEC,WAFF,CAEc,UAFd,EAGEC,MAHF,CAGS;AAAA,SAAML,aAAa;AAAA,WAAM,qCAAN;AAAA,GAAb,CAAN;AAAA,CAHT;;AAKA;AACA,oBACEG,OADF,CACU,IADV,EAEEC,WAFF,CAEc,oBAFd,EAGEC,MAHF,CAGS;AAAA,SAAML,aAAa;AAAA,WAAM,mCAAN;AAAA,GAAb,CAAN;AAAA,CAHT;;AAKA,oBACEG,OADF,CACU,QADV,EAEEC,WAFF,CAEc,iBAFd,EAGEC,MAHF,CAGS;AAAA,SAAML,aAAa;AAAA,WAAM,mCAAN;AAAA,GAAb,CAAN;AAAA,CAHT;;AAKA,oBACEG,OADF,CACU,MADV,EAEEC,WAFF,CAEc,yBAFd,EAGEC,MAHF,CAGS;AAAA,SAAML,aAAa;AAAA,WAAM,mCAAN;AAAA,GAAb,CAAN;AAAA,CAHT;;AAKA,oBACEG,OADF,CACU,aADV,EAEEC,WAFF,CAEc,yBAFd,EAGEC,MAHF,CAGS;AAAA,SAAQL,aAAa;AAAA,WAAM,oCAAYM,IAAZ,CAAN;AAAA,GAAb,CAAR;AAAA,CAHT;;AAKA,oBAAQC,KAAR,CAAcd,QAAQe,IAAtB;;AAEA","file":"index.js","sourcesContent":["\n\n// Support source map outputs\nrequire('source-map-support').install();\n\n// Print all unhandled errors\nprocess.on('unhandledRejection', err => {\n    console.log(err.stack);\n    process.exit(1);\n});\n\nimport pkgJson from '../package.json';\n\nimport 'babel-polyfill';\nimport chalk from 'chalk';\nimport figlet from 'figlet';\nimport clear from 'clear';\nimport _requireLogin from './libs/require-login';\nimport _requireAnonymous from './libs/require-anonymous';\nimport {\n\tlist,\n\tlogin,\n\tlogout,\n\tpull,\n\tpush,\n\tsignup,\n\twhoami,\n} from './options';\n\n\nimport program from 'commander';\nimport store from './store';\n\nconst requireLogin = _requireLogin(store);\nconst requireAnonymous = _requireAnonymous(store);\n\nprogram\n   .version(pkgJson.version)\n   /*.option('-C, --chdir <path>', 'change the working directory')\n   .option('-c, --config <path>', 'set config path. defaults to ./deploy.conf')*/;\n\n// Account Commands\nprogram\n .command('signup')\n .description('signup for Toolbeam')\n .action(() => requireAnonymous(() => signup(store)));\n\nprogram\n .command('login')\n .description('login to Toolbeam')\n .action(() => requireAnonymous(() => login(store)));\n\nprogram\n .command('logout')\n .description('logout from Toolbeam')\n .action(() => logout(store));\n\nprogram\n .command('whoami')\n .description('who am i')\n .action(() => requireLogin(() => whoami(store)));\n\n// Project Commands\nprogram\n .command('ls')\n .description('list of your tools')\n .action(() => requireLogin(() => list(store)));\n\nprogram\n .command('create')\n .description('create new tool')\n .action(() => requireLogin(() => list(store)));\n\nprogram\n .command('pull')\n .description('pull spec from Toolbeam')\n .action(() => requireLogin(() => pull(store)));\n\nprogram\n .command('push <file>')\n .description('push a spec to Toolbeam')\n .action(file => requireLogin(() => push(store, file)));\n\nprogram.parse(process.argv);\n\n/*\nprogram\n .command('exec <cmd>')\n .description('run the given remote command')\n .action(function(cmd) {\n\t console.log('exec \"%s\"', cmd);\n });\n\nprogram\n .command('teardown <dir> [otherDirs...]')\n .description('run teardown commands')\n .action(function(dir, otherDirs) {\n\t console.log('dir \"%s\"', dir);\n\t if (otherDirs) {\n\t\t otherDirs.forEach(function (oDir) {\n\t\t\t console.log('dir \"%s\"', oDir);\n\t\t });\n\t }\n });\n\nprogram\n .command('*')\n .description('deploy the given env')\n .action(function(env) {\n\t console.log('deploying \"%s\"', env);\n });\n\n//console.log('chdir: %s config: %s  tests: %s ', program.chdir, program.config, program.noTests);\n//\n//clear();\n//console.log(\n//  chalk.green(\n//    figlet.textSync('Toolbeam', { horizontalLayout: 'full' })\n//  )\n//);\n*/\n"]}