{"version":3,"sources":["../../src/middleware/prefs-store.js"],"names":["userActions","types","getState","dispatch","result","next","action","type","USER_LOAD","prefs","session_id","loadUserFromPrefs","user","USER_SIGNUP_SUCCESS","USER_LOGIN_SUCCESS","data","USER_LOGOUT_SUCCESS"],"mappings":";;;;;;AAAA;;IAAYA,W;;AACZ;;IAAYC,K;;;;kBAEG;AAAA,QACd;AAAA,MAAEC,QAAF,QAAEA,QAAF;AAAA,MAAYC,QAAZ,QAAYA,QAAZ;AAAA,SAA0B;AAAA,UAAQ,kBAAU;AAC3C,QAAMC,SAASC,KAAKC,MAAL,CAAf;;AAEA,YAAQA,OAAOC,IAAf;AACC,UAAKN,MAAMO,SAAX;AACC,UAAIC,MAAMC,UAAV,EAAsB;AACrBP,gBAASH,YAAYW,iBAAZ,CAA8BF,MAAMG,IAApC,EAA0CH,MAAMC,UAAhD,CAAT;AACA;AACD;AACD,UAAKT,MAAMY,mBAAX;AACA,UAAKZ,MAAMa,kBAAX;AACCL,YAAMG,IAAN,GAAaR,OAAOA,MAAP,CAAcW,IAAd,CAAmBH,IAAhC;AACAH,YAAMC,UAAN,GAAmBN,OAAOA,MAAP,CAAcW,IAAd,CAAmBL,UAAtC;AACA;AACD,UAAKT,MAAMe,mBAAX;AACCP,YAAMG,IAAN,GAAa,IAAb;AACAH,YAAMC,UAAN,GAAmB,IAAnB;AACA;AACD;AAfD;;AAkBA,WAAON,MAAP;AACA,IAtByB;AAAA,GAA1B;AAAA,EADc;AAAA,C","file":"prefs-store.js","sourcesContent":["import * as userActions from '../actions/user-actions';\nimport * as types from '../actions/action-types';\n\nexport default prefs => (\n\t({getState, dispatch}) => next => action => {\n\t\tconst result = next(action);\n\n\t\tswitch (action.type) {\n\t\t\tcase types.USER_LOAD:\n\t\t\t\tif (prefs.session_id) {\n\t\t\t\t\tdispatch(userActions.loadUserFromPrefs(prefs.user, prefs.session_id));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase types.USER_SIGNUP_SUCCESS:\n\t\t\tcase types.USER_LOGIN_SUCCESS:\n\t\t\t\tprefs.user = result.result.data.user;\n\t\t\t\tprefs.session_id = result.result.data.session_id;\n\t\t\t\tbreak;\n\t\t\tcase types.USER_LOGOUT_SUCCESS:\n\t\t\t\tprefs.user = null;\n\t\t\t\tprefs.session_id = null;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn result;\n\t}\n)\n"]}