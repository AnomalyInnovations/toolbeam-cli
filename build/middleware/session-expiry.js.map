{"version":3,"sources":["../../src/middleware/session-expiry.js"],"names":["result","next","action","catch","data","error","store","dispatch"],"mappings":";;;;;;;;;;AAIA;;;;kBAEe;AAAA,QAAS;AAAA,SAAQ,kBAAU;AACzC,OAAIA,SAASC,KAAKC,MAAL,CAAb;;AAECF,sCAAD,IAA+BA,OAAOG,KAAP,CAAa,UAACC,IAAD,EAAU;AACrD,QAAIA,KAAKC,KAAL,IAAc,GAAlB,EAAuB;AACtBC,WAAMC,QAAN,CAAe,iCAAf;AACA;AACD,WAAOH,IAAP;AACA,IAL8B,CAA/B;;AAOC,UAAOJ,MAAP;AACD,GAXuB;AAAA,EAAT;AAAA,C,EANf","file":"session-expiry.js","sourcesContent":["/**\n * Middleware to clear the session and prefs\n * when the API returns a 401 error\n */\nimport { logoutSuccess } from '../actions/user-actions';\n\nexport default store => next => action => {\n\tlet result = next(action);\n\n\t(result instanceof Promise) && result.catch((data) => {\n\t\tif (data.error == 401) {\n\t\t\tstore.dispatch(logoutSuccess());\n\t\t}\n\t\treturn data;\n\t});\n\n  return result;\n}\n"]}