{"version":3,"sources":["../../src/middleware/api-client.js"],"names":["apiClientMiddleware","client","dispatch","getState","action","promise","types","rest","next","REQUEST","SUCCESS","FAILURE","type","actionPromise","then","result","error","catch","console"],"mappings":";;;;;;;;;;;;;;;;;;kBAAwBA,mB;;;;AAAT,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;AAClD,SAAO,gBAA0B;AAAA,QAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,QAAdC,QAAc,QAAdA,QAAc;;AAC/B,WAAO;AAAA,aAAQ,kBAAU;AACvB,YAAI,OAAOC,MAAP,KAAkB,UAAtB,EAAkC;AAChC,iBAAOA,OAAOF,QAAP,EAAiBC,QAAjB,CAAP;AACD;;AAHsB,YAKfE,OALe,GAKaD,MALb,CAKfC,OALe;AAAA,YAKNC,KALM,GAKaF,MALb,CAKNE,KALM;AAAA,YAKIC,IALJ,0CAKaH,MALb,yBAKqB;;AAC5C,YAAI,CAACC,OAAL,EAAc;AACZ,iBAAOG,KAAKJ,MAAL,CAAP;AACD;;AARsB,kDAUaE,KAVb;;AAAA,YAUhBG,OAVgB;AAAA,YAUPC,OAVO;AAAA,YAUEC,OAVF;;AAWvBH,wCAASD,IAAT,IAAeK,MAAMH,OAArB;;AAEA,YAAMI,gBAAgBR,QAAQJ,MAAR,CAAtB;AACAY,sBAAcC,IAAd,CACE,UAACC,MAAD;AAAA,iBAAYP,gCAASD,IAAT,IAAeQ,cAAf,EAAuBH,MAAMF,OAA7B,IAAZ;AAAA,SADF,EAEE,UAACM,KAAD;AAAA,iBAAWR,gCAASD,IAAT,IAAeS,YAAf,EAAsBJ,MAAMD,OAA5B,IAAX;AAAA,SAFF,EAGEM,KAHF,CAGQ,UAACD,KAAD,EAAU;AAChBE,kBAAQF,KAAR,CAAc,mBAAd,EAAmCA,KAAnC;AACAR,0CAASD,IAAT,IAAeS,YAAf,EAAsBJ,MAAMD,OAA5B;AACD,SAND;;AAQA,eAAOE,aAAP;AACD,OAvBM;AAAA,KAAP;AAwBD,GAzBD;AA0BD","file":"api-client.js","sourcesContent":["export default function apiClientMiddleware(client) {\n  return ({dispatch, getState}) => {\n    return next => action => {\n      if (typeof action === 'function') {\n        return action(dispatch, getState);\n      }\n\n      const { promise, types, ...rest } = action; // eslint-disable-line no-redeclare\n      if (!promise) {\n        return next(action);\n      }\n\n      const [REQUEST, SUCCESS, FAILURE] = types;\n      next({...rest, type: REQUEST});\n\n      const actionPromise = promise(client);\n      actionPromise.then(\n        (result) => next({...rest, result, type: SUCCESS}),\n        (error) => next({...rest, error, type: FAILURE})\n      ).catch((error)=> {\n        console.error('MIDDLEWARE ERROR:', error);\n        next({...rest, error, type: FAILURE});\n      });\n\n      return actionPromise;\n    };\n  };\n}\n"]}