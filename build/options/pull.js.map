{"version":3,"sources":["../../src/options/pull.js"],"names":["specActions","fileName","getState","dispatch","spinner","start","loadInfo","load","getSpecFileLink","stop","console","log","red","message","getData","cyan"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;AAEA;;AACA;;IAAYA,W;;;;;;AAEZ,IAAMC,WAAW,WAAjB;;;uEAEe;AAAA,MAAgBC,QAAhB,SAAgBA,QAAhB;AAAA,MAA0BC,QAA1B,SAA0BA,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACRC,aADQ,GACE,kBAAY,eAAZ,CADF;;;AAGdA,cAAQC,KAAR;;AAEA;AALc;AAAA;AAAA,aAOPF,SAASH,YAAYM,QAAZ,EAAT,CAPO;;AAAA;AAAA;AAAA,aAQPH,SAASH,YAAYO,IAAZ,CAAiBP,YAAYQ,eAAZ,CAA4BN,UAA5B,CAAjB,CAAT,CARO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAWbE,cAAQK,IAAR;AACAC,cAAQC,GAAR,CAAY,gBAAMC,GAAN,mBAA0B,YAAEC,OAA5B,CAAZ;AAZa;;AAAA;AAAA;AAAA;AAAA,aAkBP,qBAAUZ,QAAV,EAAoBD,YAAYc,OAAZ,CAAoBZ,UAApB,CAApB,CAlBO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAqBbQ,cAAQC,GAAR,CAAY,gBAAMC,GAAN,aAAZ;AACAR,cAAQK,IAAR;AAtBa;;AAAA;;AA0BdL,cAAQK,IAAR;AACAC,cAAQC,GAAR,CAAY,gBAAMI,IAAN,aAAqBd,QAArB,qBAAZ;;AA3Bc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E","file":"pull.js","sourcesContent":["import chalk from 'chalk';\nimport { Spinner } from 'clui';\n\nimport { writeFile } from '../libs/file';\nimport * as specActions from '../actions/spec-actions';\n\nconst fileName = 'spec.json';\n\nexport default async function({getState, dispatch}) {\n\tconst spinner = new Spinner('Pulling specâ€¦');\n\n\tspinner.start();\n\n\t// Load spec info & data\n\ttry {\n\t\tawait dispatch(specActions.loadInfo());\n\t\tawait dispatch(specActions.load(specActions.getSpecFileLink(getState())));\n\t}\n\tcatch(e) {\n\t\tspinner.stop();\n\t\tconsole.log(chalk.red(`Pull failed: ${e.message}`));\n\t\treturn;\n\t}\n\n\t// Write file\n\ttry {\n\t\tawait writeFile(fileName, specActions.getData(getState()));\n\t}\n\tcatch(e) {\n\t\tconsole.log(chalk.red(e));\n\t\tspinner.stop();\n\t\treturn;\n\t}\n\t\n\tspinner.stop();\n\tconsole.log(chalk.cyan(`Pulled ${fileName} from Toolbeam.`));\n}\n"]}