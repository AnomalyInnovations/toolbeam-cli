{"version":3,"sources":["../../src/options/login.js"],"names":["userActions","prompts","name","description","message","required","hidden","replace","store","start","delimiter","email","password","spinner","dispatch","login","stop","console","log","red","cyan"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;AACA;;IAAYA,W;;;;;;AAEZ,IAAMC,UAAU,CACf;AACCC,OAAM,OADP;AAECC,cAAa,mBAFd;AAGCC,UAAS,yBAHV;AAICC,WAAU;AAJX,CADe,EAOf;AACCH,OAAM,UADP;AAECC,cAAa,sBAFd;AAGCC,UAAS,4BAHV;AAICE,SAAQ,IAJT;AAKCC,UAAS,GALV;AAMCF,WAAU;AANX,CAPe,CAAhB;;;uEAiBe,iBAAeG,KAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAEd,uBAAOC,KAAP;;AAEA,uBAAOL,OAAP,GAAiB,EAAjB;AACA,uBAAOM,SAAP,GAAmB,EAAnB;;AALc;AAAA,aAOkB,wBAAUT,OAAV,CAPlB;;AAAA;AAAA;AAOPU,WAPO,SAOPA,KAPO;AAOAC,cAPA,SAOAA,QAPA;AASRC,aATQ,GASE,kBAAY,yBAAZ,CATF;;AAUdA,cAAQJ,KAAR;;AAVc;AAAA;AAAA,aAaPD,MAAMM,QAAN,CAAed,YAAYe,KAAZ,CAAkBJ,KAAlB,EAAyBC,QAAzB,CAAf,CAbO;;AAAA;AAcbC,cAAQG,IAAR;AAda;AAAA;;AAAA;AAAA;AAAA;;AAiBbH,cAAQG,IAAR;AACAC,cAAQC,GAAR,CAAY,gBAAMC,GAAN,oBAA2B,YAAEf,OAA7B,CAAZ;AAlBa;;AAAA;;AAsBda,cAAQC,GAAR,CAAY,gBAAME,IAAN,CAAW,gCAAX,CAAZ;;AAtBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E","file":"login.js","sourcesContent":["import prompt from 'prompt';\nimport chalk from 'chalk';\nimport { Spinner } from 'clui';\nimport { getPrompt } from '../libs/prompt';\nimport * as userActions from '../actions/user-actions';\n\nconst prompts = [\n\t{\n\t\tname: 'email',\n\t\tdescription: 'Enter your email:',\n\t\tmessage: 'Please enter your email',\n\t\trequired: true\n\t},\n\t{\n\t\tname: 'password',\n\t\tdescription: 'Enter your password:',\n\t\tmessage: 'Please enter your password',\n\t\thidden: true,\n\t\treplace: '*',\n\t\trequired: true\n\t},\n];\n\nexport default async function(store) {\n\n\tprompt.start();\n\n\tprompt.message = '';\n\tprompt.delimiter = '';\n\n\tconst {email, password} = await getPrompt(prompts);\n\n\tconst spinner = new Spinner('Logging in to Toolbeamâ€¦');\n\tspinner.start();\n\n\ttry {\n\t\tawait store.dispatch(userActions.login(email, password));\n\t\tspinner.stop();\n\t}\n\tcatch(e) {\n\t\tspinner.stop();\n\t\tconsole.log(chalk.red(`Login failed: ${e.message}`));\n\t\treturn;\n\t}\n\n\tconsole.log(chalk.cyan('You are logged in to Toolbeam.'));\n\n}\n"]}