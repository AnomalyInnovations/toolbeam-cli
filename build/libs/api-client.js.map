{"version":3,"sources":["../../src/libs/api-client.js"],"names":["methods","formatUrl","path","adjustedPath","apiScheme","apiHost","apiPort","_ApiClient","req","forEach","method","params","data","resolve","reject","request","query","type","send","end","err","body","ApiClient"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,UAAU,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,OAAvB,EAAgC,KAAhC,CAAhB;;AAEA,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACxB,KAAMC,eAAeD,KAAK,CAAL,MAAY,GAAZ,GAAkB,MAAMA,IAAxB,GAA+BA,IAApD;AACA,QAAU,iBAAOE,SAAjB,WAAgC,iBAAOC,OAAvC,SAAkD,iBAAOC,OAAzD,WAAsEH,YAAtE;AACA;;AAED;;;;;;;IAMMI,U,GACL,oBAAYC,GAAZ,EAAiB;AAAA;;AAAA;;AAChBR,SAAQS,OAAR,CAAgB,UAACC,MAAD;AAAA,SACf,MAAKA,MAAL,IAAe,UAACR,IAAD;AAAA,oEAA0B,EAA1B;;AAAA,OAASS,MAAT,QAASA,MAAT;AAAA,OAAiBC,IAAjB,QAAiBA,IAAjB;AAAA,UAAiC,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAChF,QAAMC,UAAU,qBAAWL,MAAX,EAAmBT,UAAUC,IAAV,CAAnB,CAAhB;;AAEA,QAAIS,MAAJ,EAAY;AACXI,aAAQC,KAAR,CAAcL,MAAd;AACA;;AAED,QAAIC,IAAJ,EAAU;AACTG,aAAQE,IAAR,CAAa,MAAb;AACAF,aAAQG,IAAR,CAAaN,IAAb;AACA;;AAEDG,YAAQI,GAAR,CAAY,UAACC,GAAD;AAAA,uEAAiB,EAAjB;;AAAA,SAAQC,IAAR,SAAQA,IAAR;AAAA,YAAwBD,MAAMN,OAAOO,QAAQD,GAAf,CAAN,GAA4BP,QAAQQ,IAAR,CAApD;AAAA,KAAZ;AACA,IAb+C,CAAjC;AAAA,GADA;AAAA,EAAhB;AAeA,C;;AAGF,IAAMC,YAAYf,UAAlB;;kBAEee,S","file":"api-client.js","sourcesContent":["import superagent from 'superagent';\nimport config from '../config';\n\nconst methods = ['get', 'post', 'put', 'patch', 'del'];\n\nfunction formatUrl(path) {\n\tconst adjustedPath = path[0] !== '/' ? '/' + path : path;\n\treturn `${config.apiScheme}://${config.apiHost}:${config.apiPort}/v1${adjustedPath}`;\n}\n\n/*\n * This silly underscore is here to avoid a mysterious \"ReferenceError: ApiClient is not defined\" error.\n * See Issue #14. https://github.com/erikras/react-redux-universal-hot-example/issues/14\n *\n * Remove it at your own risk.\n */\nclass _ApiClient {\n\tconstructor(req) {\n\t\tmethods.forEach((method) =>\n\t\t\tthis[method] = (path, { params, data } = {}) => new Promise((resolve, reject) => {\n\t\t\t\tconst request = superagent[method](formatUrl(path));\n\n\t\t\t\tif (params) {\n\t\t\t\t\trequest.query(params);\n\t\t\t\t}\n\n\t\t\t\tif (data) {\n\t\t\t\t\trequest.type('form');\n\t\t\t\t\trequest.send(data);\n\t\t\t\t}\n\n\t\t\t\trequest.end((err, { body } = {}) => err ? reject(body || err) : resolve(body));\n\t\t\t}));\n\t}\n}\n\nconst ApiClient = _ApiClient;\n\nexport default ApiClient;\n"]}